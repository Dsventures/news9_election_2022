
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Georama:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,500;1,600&display=swap" />
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="caste-equation.css">
</head>
<body>
    <div style="visibility: hidden;">Counter: <span id="counter"></span></div>

    <div class="UPCasteEq_model_blackout" style="display: none;"></div>
    <div class="UPCasteEq_model" style="display: none;">
        <div class="UPCasteEq_model_inner">
            <button id="closeModel">X</button>
            <div class="UPCasteEq_model_content">
                <div id="errormessage" style="display: none;">
                    <span id="error"></span>
                </div>
                <div id="methodology" style="display: none;">
                    <h2>Methodology</h2>
                    <p>The projections are based on the overall voting pattern observed in Uttar Pradesh since the 2017 assembly election. The
                    data has been collated for ten “dominant” castes and their voting preferences. This is then built into the equation to
                    present outcomes based on a user’s input. The factors used for the calculation include seat tally, dominant castes in
                    each constituency, changing factor based on the voting of each caste, share of total votes, and percentage of voters of
                    each caste in the state. The default values are based on the election results in the 2017 assembly polls.</p>
                    <p>Further, changes in calculations and outcomes are based on the user input at the number of sliders. The consolidated
                    result of all these parameters is the outcome (or “winning probability” of the candidate under chosen conditions.)</p>
                    <p>These results do not claim the absolute victory but the possibility of victory in the number of constituencies based on
                    selected parameters and the data.</p>
                    <p style="border-top: 1px solid #000; margin: 10px auto 0 auto;width: 80%;padding-top: 10px;"><b>Concept and data modelling:</b> Partha Das, Akash Gulankar | <b>Development:</b> Eunice Elizabeth Dhivya | <b>Design:</b> Prathap
                    Ravishankar</p>
                </div>
                <div id="result" style="display: none;">
                    <p style="font-weight: 600;">Based on your inputs</p>
                    <ul>
                        <li id="bjpstr"></li>
                        <li id="spstr"></li>
                        <li id="bspstr"></li>
                        <li id="congressstr"></li>
                        <li id="othersstr"></li>
                    </ul>
                    <div class="result_body">
                        <div id="bjp">
                            <h3>BJP</h3>
                            <p class="precent">13%</p>
                            <div class="seatsWrap">
                                <h1>169</h1>
                                <small>SEATS</small>
                            </div>
                            <div class="lost">
                                <p>-112</p>
                                <p>SEATS</p>
                            </div>
                        </div>
                        <div id="sp">
                            <h3>SP</h3>
                            <p class="precent">13%</p>
                            <div class="seatsWrap">
                                <h1>54</h1>
                                <small>SEATS</small>
                            </div>
                            <div class="won">
                                <p>+12</p>
                                <p>SEATS</p>
                            </div>
                        </div>
                        <div id="bsp">
                            <h3>BSP</h3>
                            <p class="precent">13%</p>
                            <div class="seatsWrap">
                                <h1>14</h1>
                                <small>SEATS</small>
                            </div>
                            <div class="won">
                                <p>+52</p>
                                <p>SEATS</p>
                            </div>
                        </div>
                        <div id="congress">
                            <h3>Congress</h3>
                            <p class="precent">13%</p>
                            <div class="seatsWrap">
                                <h1>20</h1>
                                <small>SEATS</small>
                            </div>
                            <div class="won">
                                <p>+2</p>
                                <p>SEATS</p>
                            </div>
                        </div>
                        <div id="others">
                            <h3>Others</h3>
                            <p class="precent">13%</p>
                            <div class="seatsWrap">
                                <h1>5</h1>
                                <small>SEATS</small>
                            </div>
                            <div class="lost">
                                <p>-6</p>
                                <p>SEATS</p>
                            </div>
                        </div>
                    </div>
                    <button id="closeModel2">close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="tv9-interactives">
        <div class="row">
            <h1 class="title">UP 2022: THE NUMBERS GAME</h1>
            <p class="desc">This widget lets you play pollster! Select a caste group from the drop-down box below. You will be presented with how many seats that group influences in UP and vote-share of the community based on political party (in the 2017 polls). Now move the slider to fix possible vote-share scenarios and hit "submit". The pop-up box will tell you how many seats each
            party wins in 2022 based on your inputs.</p>
        </div>
        <div class="row">
            <div class="flex-group">
                <select id="caste-selector">
                    <option value="choose">Choose caste</option>
                    <option value="Jat">Jat</option>
                    <option value="Gurjar">Gurjar</option>
                    <option value="Rajput">Rajput</option>
                    <option value="Brahmin">Brahmin</option>
                    <option value="Yadav">Yadav</option>
                    <option value="Kurmi">Kurmi</option>
                    <option value="Kushwaha">Kushwaha</option>
                    <option value="Nishad">Nishad</option>
                    <option value="Rajbhar">Rajbhar</option>
                    <option value="Vaishya">Vaishya</option>
                </select>
                <p class="influence" style="visibility:hidden;"><span id="chosenCaste">&nbsp;&nbsp;&nbsp;&nbsp;</span> influence <span
                        id="chosenCasteSeats">&nbsp;&nbsp;&nbsp;&nbsp;</span> seats
                    in UP
                </p>
            </div>
        </div>
        <section class="slidersection">
            <div class="slidecontainer" id="rangeBJP">
                <!-- <p>BJP voteshare in 2017</p> -->
                <div class="slidecontent">
                    <span class="party">BJP</span>
                    <span class="min">0</span>
                    <div class="slideblock">
                        <span class="dfault-arrow"></span>
                        <span class="dfault-val">0%</span>
                        <input type="range" class="slider" data-party="BJP" step="5" value="0" min="0" max="100">
                        <span class="value">0%</span>
                    </div>
                    <span class="max">100%</span>
                </div>
            </div>
        
            <div class="slidecontainer" id="rangeSP">
                <!-- <p>SP voteshare in 2017</p> -->
                <div class="slidecontent">
                    <span class="party">SP</span>
                    <span class="min">0</span>
                    <div class="slideblock">
                        <span class="value">0%</span>
                        <span class="dfault-arrow"></span>
                        <span class="dfault-val">0%</span>
                        <input type="range" class="slider" data-party="SP" step="5" value="0" min="0" max="100">
                    </div>
                    <span class="max">100%</span>
                </div>
            </div>
        
            <div class="slidecontainer" id="rangeBSP">
                <!-- <p>BSP voteshare in 2017</p> -->
                <div class="slidecontent">
                    <span class="party">BSP</span>
                    <span class="min">0</span>
                    <div class="slideblock">
                        <span class="value">0%</span>
                        <span class="dfault-arrow"></span>
                        <span class="dfault-val">0%</span>
                        <input type="range" class="slider" data-party="BSP" step="5" value="0" min="0" max="100">
                    </div>
                    <span class="max">100%</span>
                </div>
            </div>
        
            <div class="slidecontainer" id="rangeCongress">
                <!-- <p>Congress voteshare in 2017</p> -->
                <div class="slidecontent">
                    <span class="party">Congress</span>
                    <span class="min">0</span>
                    <div class="slideblock">
                        <span class="value">0%</span>
                        <span class="dfault-arrow"></span>
                        <span class="dfault-val">0%</span>
                        <input type="range" class="slider" value="0" data-party="Congress" step="5" min="0" max="100">
                    </div>
                    <span class="max">100%</span>
                </div>
            </div>
        
            <div class="slidecontainer" id="rangeOthers">
                <!-- <p>Others voteshare in 2017</p> -->
                <div class="slidecontent">
                    <span class="party">Others</span>
                    <span class="min">0</span>
                    <div class="slideblock">
                        <span class="value">0%</span>
                        <span class="dfault-arrow"></span>
                        <span class="dfault-val">0%</span>
                        <input type="range" class="slider" value="0" data-party="Others" step="5" min="0" max="100">
                    </div>
                    <span class="max">100%</span>
                </div>
            </div>
        </section>
        <!-- <span id="error"></span> -->
        <div class="UPCasteEq_buttons">
            <button id="submit">Submit</button>
            <button id="reset">Reset</button>
        </div>
        <button id="method">Methodology</button>
    </div>

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
    <!-- <script>
        var inputs = [...document.querySelectorAll(".slidecontainer input")];
        // var inputs2 = document.querySelectorAll(".slidecontainer input");

            // console.log(inputs2, typeof(inputs2));

            for (var input of inputs) {
                input.addEventListener("input", update);
            }

            update();

            function update(e) {
                // cap the value to max
                if (e && e.target.valueAsNumber > +e.target.dataset.max) {
                    e.target.value = e.target.dataset.max;
                }

                var sumOfAllInputs = inputs.reduce((sum, input) => sum + input.valueAsNumber, 0);

                document.querySelector("#counter").textContent = 100 - sumOfAllInputs + "%";

                for (var input of inputs) {
                    //const sumOfOtherInputs = sumOfAllInputs - input.valueAsNumber; 
                    const max = 100 + input.valueAsNumber - sumOfAllInputs;
                    const container = input.closest(".slidecontainer");

                    container.querySelector(".max").textContent = 100;
                    // container.querySelector(".max").textContent = max;
                    input.dataset.max = max;

                    container.querySelector(".line-right").style.left = max + "%";
                    container.querySelector(".value").textContent = input.valueAsNumber + "%";
                    container.querySelector(".value").style.left = input.valueAsNumber + "%";

                    // set the break-points for the background to visualize the range
                    input.style.setProperty("--value", input.valueAsNumber + "%");
                    input.style.setProperty("--max", max + "%");
                }
            }

    </script> -->
</body>
</html>